<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <composite:interface> 

    </composite:interface>
    <composite:implementation>
        <h:form id="food-search" styleClass="form">
            <div class="form-group">
                <p:autoComplete id="selectedFood" value="#{foodSearchController.selectedFood}"
                                completeMethod="#{foodSearchController.complete}"
                                var="food" 
                                itemLabel="#{food.name}" 
                                itemValue="#{food}"
                                maxResults="5"
                                converter="foodConverter">
                    <p:ajax event="itemSelect" listener="#{itemChangeListener.handleSelect}"
                            update="msg foodUpdate foodUpdate1 foodUpdate2 foodUpdate3 " />
                </p:autoComplete>
                
                <p:messages  for="selectedFood" id="msg"></p:messages>
                
                <h:outputLabel value="Nutriants per g/ml: " styleClass="label-style"/>
                <div class="foodInfoDetail">
                    
                    <div class="form-group detail-cell">
                        <h:outputLabel value="Calories: " styleClass="label-style"/>
                        <h:outputText id="foodUpdate1" value="#{foodSearchController.selectedFood.calories}"/>
                    </div>   
                    <div class="form-group detail-cell">
                        <h:outputLabel value="Carbs: " styleClass="label-style"/>
                        <h:outputText id="foodUpdate2" value="#{foodSearchController.selectedFood.carb}"/>
                    </div>   
                    <div class="form-group detail-cell">
                        <h:outputLabel value="Protein: " styleClass="label-style"/>
                        <h:outputText id="foodUpdate3" value="#{foodSearchController.selectedFood.prot}"/>
                    </div> 
                    <div class="form-group detail-cell">
                        <h:outputLabel value="Fat: " styleClass="label-style"/>
                        <h:outputText id="foodUpdate" styleClass="label-style" value="#{foodSearchController.selectedFood.fat}"/>
                    </div>
                </div>
            </div>
        </h:form>


        <h:outputLabel styleClass="label-style" value="Excel format to upload : "/>
        <h:button value="Download" onclick="#{helloBean.downloadFile}"/>
        <h:form enctype="multipart/form-data" styleClass="form">
            <div class="form-group">
                <h:outputLabel styleClass="label-style" value="New food upload : "/>
                <h:inputFile value="#{bean.file}" label="file-upload">
                    <f:ajax listener="#{bean.save}" />
                </h:inputFile>
            </div>
        </h:form>   

    </composite:implementation>
</html>

